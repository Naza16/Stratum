<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Action History - STRATUM Citizen Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-cyan: #06b6d4;
            --primary-purple: #7c3aed;
            --dark-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.8);
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --gradient-primary: linear-gradient(135deg, #06b6d4, #0891b2);
            --gradient-secondary: linear-gradient(135deg, #7c3aed, #5b21b6);
            --gradient-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            --gradient-success: linear-gradient(135deg, #10b981, #059669);
            --gradient-warning: linear-gradient(135deg, #f59e0b, #d97706);
            --gradient-danger: linear-gradient(135deg, #ef4444, #dc2626);
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.05;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-40px) rotate(120deg); }
            66% { transform: translateY(40px) rotate(240deg); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a.active,
        .nav-links a:hover {
            color: var(--primary-cyan);
        }

        .nav-links a.active::before,
        .nav-links a:hover::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary-cyan);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 20px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        /* Page Header */
        .page-header {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2rem 0;
            border: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        /* Statistics Summary */
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .stat-positive { color: var(--accent-green); }
        .stat-negative { color: var(--accent-red); }
        .stat-neutral { color: var(--primary-cyan); }
        .stat-total { color: var(--text-primary); }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Filters and Controls */
        .controls-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(20px);
        }

        .controls-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .controls-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .view-toggle {
            display: flex;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
            padding: 0.3rem;
        }

        .view-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .view-btn.active {
            background: var(--gradient-primary);
            color: white;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .filter-input,
        .filter-select {
            padding: 0.8rem;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: var(--primary-cyan);
        }

        .search-bar {
            position: relative;
            grid-column: 1 / -1;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-cyan);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .filter-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-tag {
            padding: 0.3rem 0.8rem;
            background: rgba(6, 182, 212, 0.2);
            color: var(--primary-cyan);
            border-radius: 16px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .filter-tag .remove-tag {
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .filter-tag .remove-tag:hover {
            opacity: 1;
        }

        /* History Timeline */
        .history-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(20px);
            margin-bottom: 2rem;
        }

        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, var(--primary-cyan), var(--primary-purple));
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 16px;
            padding: 1.5rem;
            margin-left: 1rem;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(20px);
            animation: slideInLeft 0.6s ease forwards;
        }

        .timeline-item:nth-child(even) {
            animation-delay: 0.1s;
        }

        .timeline-item:nth-child(odd) {
            animation-delay: 0.2s;
        }

        @keyframes slideInLeft {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timeline-item:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.5rem;
            top: 1.5rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 3px solid var(--dark-bg);
        }

        .timeline-item.positive::before {
            background: var(--accent-green);
        }

        .timeline-item.negative::before {
            background: var(--accent-red);
        }

        .timeline-item.neutral::before {
            background: var(--primary-cyan);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .timeline-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.3rem;
        }

        .timeline-category {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            background: rgba(124, 58, 237, 0.2);
            color: var(--primary-purple);
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(124, 58, 237, 0.3);
        }

        .timeline-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .timeline-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .timeline-impact {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 1rem;
        }

        .impact-positive {
            color: var(--accent-green);
        }

        .impact-negative {
            color: var(--accent-red);
        }

        .impact-neutral {
            color: var(--primary-cyan);
        }

        .timeline-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .timeline-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            background: rgba(15, 23, 42, 0.3);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .detail-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .timeline-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 0.4rem 0.8rem;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .action-view {
            background: rgba(6, 182, 212, 0.2);
            color: var(--primary-cyan);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .action-appeal {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-1px);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .pagination-btn {
            padding: 0.8rem 1.2rem;
            background: var(--card-bg);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .pagination-btn:hover,
        .pagination-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Export Section */
        .export-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(20px);
            text-align: center;
        }

        .export-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .export-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .export-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .export-btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .export-pdf {
            background: var(--gradient-danger);
            color: white;
        }

        .export-csv {
            background: var(--gradient-success);
            color: white;
        }

        .export-btn:hover {
            transform: translateY(-2px);
        }

        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(6, 182, 212, 0.3);
            border-top: 3px solid var(--primary-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .controls-header {
                flex-direction: column;
                align-items: stretch;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .timeline {
                padding-left: 1rem;
            }

            .timeline::before {
                left: 0.5rem;
            }

            .timeline-item {
                margin-left: 0.5rem;
            }

            .timeline-item::before {
                left: -1.75rem;
            }

            .timeline-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .timeline-details {
                grid-template-columns: 1fr;
            }

            .stats-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">STRATUM</div>
                <ul class="nav-links">
                    <li><a href="Citizen-Dashboard.html">Dashboard</a></li>
                    <li><a href="#history" class="active">History</a></li>
                    <li><a href="Citizen-Goals.html">Goals</a></li>
                    <li><a href="Citizen-Appeals.html">Appeals</a></li>
                </ul>
                <div class="user-info">
                    <div class="user-status">
                        <div class="status-indicator"></div>
                        <span>Active</span>
                    </div>
                    <div class="user-avatar">JD</div>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Page Header -->
        <section class="page-header">
            <h1 class="page-title">Action History</h1>
            <p class="page-subtitle">
                Complete record of all actions, behaviors, and events that have influenced your IEC score
            </p>
            
            <!-- Statistics Summary -->
            <div class="stats-summary">
                <div class="stat-card">
                    <div class="stat-number stat-total" data-target="247">0</div>
                    <div class="stat-label">Total Actions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number stat-positive" data-target="189">0</div>
                    <div class="stat-label">Positive Actions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number stat-negative" data-target="23">0</div>
                    <div class="stat-label">Negative Actions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number stat-neutral" data-target="35">0</div>
                    <div class="stat-label">Neutral Actions</div>
                </div>
            </div>
        </section>

        <!-- Controls and Filters -->
        <section class="controls-section">
            <div class="controls-header">
                <h2 class="controls-title">Filter & Search</h2>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="timeline">
                        <i class="fas fa-list"></i> Timeline
                    </button>
                    <button class="view-btn" data-view="grid">
                        <i class="fas fa-th"></i> Grid
                    </button>
                </div>
            </div>

            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">Date Range</label>
                    <select class="filter-select" id="dateRange">
                        <option value="all">All Time</option>
                        <option value="week">Last Week</option>
                        <option value="month" selected>Last Month</option>
                        <option value="quarter">Last Quarter</option>
                        <option value="year">Last Year</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Action Type</label>
                    <select class="filter-select" id="actionType">
                        <option value="all">All Types</option>
                        <option value="community">Community Engagement</option>
                        <option value="civic">Civic Participation</option>
                        <option value="digital">Digital Behavior</option>
                        <option value="economic">Economic Activity</option>
                        <option value="social">Social Compliance</option>
                        <option value="education">Education</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Impact</label>
                    <select class="filter-select" id="impactFilter">
                        <option value="all">All Impacts</option>
                        <option value="positive">Positive Only</option>
                        <option value="negative">Negative Only</option>
                        <option value="neutral">Neutral Only</option>
                        <option value="high">High Impact (±10+)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Sort By</label>
                    <select class="filter-select" id="sortBy">
                        <option value="date-desc">Date (Newest First)</option>
                        <option value="date-asc">Date (Oldest First)</option>
                        <option value="impact-desc">Impact (Highest First)</option>
                        <option value="impact-asc">Impact (Lowest First)</option>
                        <option value="type">Action Type</option>
                    </select>
                </div>

                <div class="search-bar">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search actions, descriptions, locations..." id="searchInput">
                </div>
            </div>

            <div class="filter-tags" id="filterTags">
                <!-- Active filters will be displayed here -->
            </div>
        </section>

        <!-- History Timeline -->
        <section class="history-section">
            <div class="timeline" id="timeline">
                <!-- Timeline items will be populated by JavaScript -->
            </div>
            
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
            </div>

            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">
                    <i class="fas fa-history"></i>
                </div>
                <h3 class="empty-title">No Actions Found</h3>
                <p>Try adjusting your filters or search terms to find more results.</p>
            </div>
        </section>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <button class="pagination-btn" id="prevBtn" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <span class="pagination-info" id="paginationInfo">Page 1 of 5</span>
            <button class="pagination-btn" id="nextBtn">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <!-- Export Section -->
        <section class="export-section">
            <h3 class="export-title">Export Your History</h3>
            <p class="export-description">
                Download your complete action history for personal records or appeals process
            </p>
            <div class="export-buttons">
                <button class="export-btn export-pdf">
                    <i class="fas fa-file-pdf"></i>
                    Export as PDF
                </button>
                <button class="export-btn export-csv">
                    <i class="fas fa-file-csv"></i>
                    Export as CSV
                </button>
            </div>
        </section>
    </main>

    <script>
        // Sample data for demonstration
        const sampleActions = [
            {
                id: 1,
                title: "Community Cleanup Volunteer",
                category: "Community Engagement",
                type: "community",
                date: "2024-12-20T14:30:00Z",
                impact: 15,
                description: "Participated in neighborhood cleanup initiative in Central Park area. Contributed 4 hours of volunteer work.",
                location: "Central Park, Downtown",
                duration: "4 hours",
                verificationMethod: "GPS + Photo Verification",
                status: "Verified"
            },
            {
                id: 2,
                title: "Digital Ethics Course Completion",
                category: "Education",
                type: "education",
                date: "2024-12-19T10:15:00Z",
                impact: 8,
                description: "Successfully completed the 'Advanced Digital Citizenship' online course with 92% score.",
                location: "Online Platform",
                duration: "6 hours",
                verificationMethod: "Course Certificate",
                status: "Verified"
            },
            {
                id: 3,
                title: "Traffic Violation - Speeding",
                category: "Social Compliance",
                type: "social",
                date: "2024-12-17T16:45:00Z",
                impact: -5,
                description: "Minor speeding violation on Highway 101. Speed recorded at 38 mph in 30 mph zone.",
                location: "Highway 101, Mile Marker 15",
                duration: "Instant",
                verificationMethod: "Traffic Camera",
                status: "Confirmed"
            },
            {
                id: 4,
                title: "Local Election Voting",
                category: "Civic Participation",
                type: "civic",
                date: "2024-12-15T11:20:00Z",
                impact: 12,
                description: "Participated in local municipal elections. Voted for city council and school board positions.",
                location: "Community Center Voting Station",
                duration: "30 minutes",
                verificationMethod: "Voter Registration System",
                status: "Verified"
            },
            {
                id: 5,
                title: "Charitable Donation",
                category: "Community Engagement",
                type: "community",
                date: "2024-12-14T09:30:00Z",
                impact: 10,
                description: "Made monetary donation to local food bank through verified charity platform.",
                location: "Online Donation Platform",
                duration: "5 minutes",
                verificationMethod: "Bank Transaction + Receipt",
                status: "Verified"
            },
            {
                id: 6,
                title: "Social Media Positive Engagement",
                category: "Digital Behavior",
                type: "digital",
                date: "2024-12-13T20:15:00Z",
                impact: 3,
                description: "Shared educational content about environmental conservation with positive community response.",
                location: "Social Media Platform",
                duration: "15 minutes",
                verificationMethod: "Platform Analytics",
                status: "Verified"
            },
            {
                id: 7,
                title: "Public Transportation Usage",
                category: "Environmental Behavior",
                type: "social",
                date: "2024-12-12T08:00:00Z",
                impact: 2,
                description: "Used public transportation instead of personal vehicle for daily commute.",
                location: "Metro Line 3",
                duration: "45 minutes",
                verificationMethod: "Transit Card Data",
                status: "Verified"
            },
            {
                id: 8,
                title: "Neighborhood Watch Meeting",
                category: "Community Engagement",
                type: "community",
                date: "2024-12-10T19:00:00Z",
                impact: 7,
                description: "Attended monthly neighborhood watch meeting and volunteered for patrol duty.",
                location: "Community Center Room B",
                duration: "2 hours",
                verificationMethod: "Meeting Attendance Log",
                status: "Verified"
            }
        ];

        let currentPage = 1;
        const itemsPerPage = 5;
        let filteredActions = [...sampleActions];
        let activeFilters = {};

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            animateCounters();
            renderTimeline();
            setupEventListeners();
            updatePagination();
        });

        // Animate counter numbers
        function animateCounters() {
            const counters = document.querySelectorAll('[data-target]');
            counters.forEach(counter => {
                const target = parseInt(counter.dataset.target);
                animateCounter(counter, target);
            });
        }

        function animateCounter(element, target, duration = 2000) {
            let start = 0;
            const increment = target / (duration / 16);
            const timer = setInterval(() => {
                start += increment;
                if (start >= target) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(start);
                }
            }, 16);
        }

        // Render timeline
        function renderTimeline() {
            const timeline = document.getElementById('timeline');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageActions = filteredActions.slice(startIndex, endIndex);

            if (pageActions.length === 0) {
                document.getElementById('emptyState').style.display = 'block';
                timeline.style.display = 'none';
                return;
            }

            document.getElementById('emptyState').style.display = 'none';
            timeline.style.display = 'block';

            timeline.innerHTML = pageActions.map(action => `
                <div class="timeline-item ${getImpactClass(action.impact)}" data-id="${action.id}">
                    <div class="timeline-header">
                        <div>
                            <h3 class="timeline-title">${action.title}</h3>
                            <span class="timeline-category">${action.category}</span>
                        </div>
                        <div class="timeline-meta">
                            <div class="timeline-date">
                                <i class="fas fa-calendar"></i>
                                ${formatDate(action.date)}
                            </div>
                            <div class="timeline-impact ${getImpactClass(action.impact)}">
                                <i class="fas fa-${getImpactIcon(action.impact)}"></i>
                                ${action.impact > 0 ? '+' : ''}${action.impact}
                            </div>
                        </div>
                    </div>
                    
                    <p class="timeline-description">${action.description}</p>
                    
                    <div class="timeline-details">
                        <div class="detail-item">
                            <span class="detail-label">Location</span>
                            <span class="detail-value">${action.location}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Duration</span>
                            <span class="detail-value">${action.duration}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Verification</span>
                            <span class="detail-value">${action.verificationMethod}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Status</span>
                            <span class="detail-value">${action.status}</span>
                        </div>
                    </div>
                    
                    <div class="timeline-actions">
                        <button class="action-btn action-view" onclick="viewDetails(${action.id})">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                        ${action.impact < 0 ? `
                            <button class="action-btn action-appeal" onclick="appealAction(${action.id})">
                                <i class="fas fa-gavel"></i> Appeal
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');

            // Trigger animations
            setTimeout(() => {
                document.querySelectorAll('.timeline-item').forEach((item, index) => {
                    item.style.animationDelay = `${index * 0.1}s`;
                });
            }, 100);
        }

        // Helper functions
        function getImpactClass(impact) {
            if (impact > 0) return 'positive';
            if (impact < 0) return 'negative';
            return 'neutral';
        }

        function getImpactIcon(impact) {
            if (impact > 0) return 'arrow-up';
            if (impact < 0) return 'arrow-down';
            return 'minus';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Event listeners
        function setupEventListeners() {
            // Search input
            document.getElementById('searchInput').addEventListener('input', handleSearch);

            // Filter selects
            document.getElementById('dateRange').addEventListener('change', handleFilter);
            document.getElementById('actionType').addEventListener('change', handleFilter);
            document.getElementById('impactFilter').addEventListener('change', handleFilter);
            document.getElementById('sortBy').addEventListener('change', handleSort);

            // View toggle
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', handleViewToggle);
            });

            // Pagination
            document.getElementById('prevBtn').addEventListener('click', () => changePage(-1));
            document.getElementById('nextBtn').addEventListener('click', () => changePage(1));

            // Export buttons
            document.querySelector('.export-pdf').addEventListener('click', () => exportData('pdf'));
            document.querySelector('.export-csv').addEventListener('click', () => exportData('csv'));
        }

        function handleSearch(e) {
            const searchTerm = e.target.value.toLowerCase();
            filteredActions = sampleActions.filter(action => 
                action.title.toLowerCase().includes(searchTerm) ||
                action.description.toLowerCase().includes(searchTerm) ||
                action.location.toLowerCase().includes(searchTerm) ||
                action.category.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            renderTimeline();
            updatePagination();
            updateFilterTags();
        }

        function handleFilter(e) {
            const filterType = e.target.id;
            const filterValue = e.target.value;
            
            activeFilters[filterType] = filterValue;
            applyFilters();
        }

        function applyFilters() {
            filteredActions = sampleActions.filter(action => {
                // Date range filter
                if (activeFilters.dateRange && activeFilters.dateRange !== 'all') {
                    const actionDate = new Date(action.date);
                    const now = new Date();
                    const daysDiff = (now - actionDate) / (1000 * 60 * 60 * 24);
                    
                    switch (activeFilters.dateRange) {
                        case 'week':
                            if (daysDiff > 7) return false;
                            break;
                        case 'month':
                            if (daysDiff > 30) return false;
                            break;
                        case 'quarter':
                            if (daysDiff > 90) return false;
                            break;
                        case 'year':
                            if (daysDiff > 365) return false;
                            break;
                    }
                }

                // Action type filter
                if (activeFilters.actionType && activeFilters.actionType !== 'all') {
                    if (action.type !== activeFilters.actionType) return false;
                }

                // Impact filter
                if (activeFilters.impactFilter && activeFilters.impactFilter !== 'all') {
                    switch (activeFilters.impactFilter) {
                        case 'positive':
                            if (action.impact <= 0) return false;
                            break;
                        case 'negative':
                            if (action.impact >= 0) return false;
                            break;
                        case 'neutral':
                            if (action.impact !== 0) return false;
                            break;
                        case 'high':
                            if (Math.abs(action.impact) < 10) return false;
                            break;
                    }
                }

                return true;
            });

            currentPage = 1;
            renderTimeline();
            updatePagination();
            updateFilterTags();
        }

        function handleSort(e) {
            const sortBy = e.target.value;
            
            switch (sortBy) {
                case 'date-desc':
                    filteredActions.sort((a, b) => new Date(b.date) - new Date(a.date));
                    break;
                case 'date-asc':
                    filteredActions.sort((a, b) => new Date(a.date) - new Date(b.date));
                    break;
                case 'impact-desc':
                    filteredActions.sort((a, b) => b.impact - a.impact);
                    break;
                case 'impact-asc':
                    filteredActions.sort((a, b) => a.impact - b.impact);
                    break;
                case 'type':
                    filteredActions.sort((a, b) => a.category.localeCompare(b.category));
                    break;
            }
            
            renderTimeline();
        }

        function handleViewToggle(e) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');
            
            // Here you would implement grid view vs timeline view
            // For now, we'll just show a notification
            showNotification('View Changed', `Switched to ${e.target.dataset.view} view`);
        }

        function updateFilterTags() {
            const filterTags = document.getElementById('filterTags');
            const tags = [];

            Object.entries(activeFilters).forEach(([key, value]) => {
                if (value && value !== 'all') {
                    const label = getFilterLabel(key, value);
                    tags.push(`
                        <span class="filter-tag">
                            ${label}
                            <i class="fas fa-times remove-tag" onclick="removeFilter('${key}')"></i>
                        </span>
                    `);
                }
            });

            filterTags.innerHTML = tags.join('');
        }

        function getFilterLabel(key, value) {
            const labels = {
                dateRange: { week: 'Last Week', month: 'Last Month', quarter: 'Last Quarter', year: 'Last Year' },
                actionType: { community: 'Community', civic: 'Civic', digital: 'Digital', economic: 'Economic', social: 'Social', education: 'Education' },
                impactFilter: { positive: 'Positive', negative: 'Negative', neutral: 'Neutral', high: 'High Impact' }
            };
            
            return labels[key]?.[value] || value;
        }

        function removeFilter(filterType) {
            delete activeFilters[filterType];
            document.getElementById(filterType).value = 'all';
            applyFilters();
        }

        function changePage(direction) {
            const totalPages = Math.ceil(filteredActions.length / itemsPerPage);
            const newPage = currentPage + direction;
            
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderTimeline();
                updatePagination();
                
                // Scroll to top of timeline
                document.querySelector('.history-section').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredActions.length / itemsPerPage);
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const paginationInfo = document.getElementById('paginationInfo');

            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages || totalPages === 0;
            
            paginationInfo.textContent = totalPages > 0 ? `Page ${currentPage} of ${totalPages}` : 'No results';
        }

        // Action handlers
        function viewDetails(actionId) {
            const action = sampleActions.find(a => a.id === actionId);
            showModal('Action Details', `
                <div style="text-align: left;">
                    <h4 style="color: var(--text-primary); margin-bottom: 1rem;">${action.title}</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">${action.description}</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div><strong>Category:</strong> ${action.category}</div>
                        <div><strong>Impact:</strong> ${action.impact > 0 ? '+' : ''}${action.impact}</div>
                        <div><strong>Location:</strong> ${action.location}</div>
                        <div><strong>Duration:</strong> ${action.duration}</div>
                        <div><strong>Verification:</strong> ${action.verificationMethod}</div>
                        <div><strong>Status:</strong> ${action.status}</div>
                    </div>
                    <div><strong>Date:</strong> ${formatDate(action.date)}</div>
                </div>
            `);
        }

        function appealAction(actionId) {
            showModal('Appeal Action', `
                <div style="text-align: left;">
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        You can appeal this action if you believe it was recorded in error or if there are 
                        extenuating circumstances that should be considered.
                    </p>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Reason for Appeal:</label>
                        <textarea style="width: 100%; padding: 0.8rem; background: rgba(15, 23, 42, 0.5); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 8px; color: var(--text-primary); min-height: 100px;" placeholder="Please explain why you are appealing this action..."></textarea>
                    </div>
                    <button onclick="submitAppeal(${actionId})" style="background: var(--gradient-primary); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer;">Submit Appeal</button>
                </div>
            `);
        }

        function submitAppeal(actionId) {
            // Close modal and show success notification
            document.querySelector('.modal-overlay')?.remove();
            showNotification('Appeal Submitted', 'Your appeal has been submitted and will be reviewed within 5-7 business days.');
        }

        function exportData(format) {
            showNotification('Export Started', `Preparing your data for ${format.toUpperCase()} export...`);
            
            // Simulate export process
            setTimeout(() => {
                showNotification('Export Complete', `Your action history has been exported as ${format.toUpperCase()}.`);
            }, 2000);
        }

        // Modal system
        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: var(--card-bg);
                    padding: 2rem;
                    border-radius: 20px;
                    max-width: 600px;
                    max-height: 80vh;
                    overflow-y: auto;
                    border: 1px solid rgba(148, 163, 184, 0.2);
                    backdrop-filter: blur(20px);
                    position: relative;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 style="color: var(--text-primary); font-size: 1.5rem;">${title}</h3>
                        <button onclick="this.closest('.modal-overlay').remove()" style="
                            background: none;
                            border: none;
                            color: var(--text-secondary);
                            font-size: 1.5rem;
                            cursor: pointer;
                            padding: 0.5rem;
                        ">&times;</button>
                    </div>
                    ${content}
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.style.opacity = '1', 10);
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });
        }

        // Notification system
        function showNotification(title, message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--card-bg);
                border: 1px solid rgba(148, 163, 184, 0.2);
                border-radius: 12px;
                padding: 1rem 1.5rem;
                backdrop-filter: blur(20px);
                z-index: 10000;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
                max-width: 350px;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <i class="fas fa-check-circle" style="color: var(--accent-green);"></i>
                    <strong style="color: var(--text-primary);">${title}</strong>
                </div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // Parallax effect for floating shapes
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const shapes = document.querySelectorAll('.shape');
            shapes.forEach((shape, index) => {
                const speed = 0.3 + (index * 0.1);
                shape.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });
    </script>
</body>
</html>